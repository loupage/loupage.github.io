(function(e){function t(t){for(var r,n,i=t[0],d=t[1],c=t[2],l=0,u=[];l<i.length;l++)n=i[l],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&u.push(a[n][0]),a[n]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);f&&f(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,n=1;n<o.length;n++){var i=o[n];0!==a[i]&&(r=!1)}r&&(s.splice(t--,1),e=d(d.s=o[0]))}return e}var r={},n={1:0},a={1:0},s=[];function i(e){return d.p+"js/"+({}[e]||e)+"."+{2:"b3b131cc",3:"72661706",4:"c39374ff",5:"8a973168",6:"642a8c9d",7:"6d7b85ee"}[e]+".js"}function d(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.e=function(e){var t=[],o={2:1,3:1,4:1,5:1};n[e]?t.push(n[e]):0!==n[e]&&o[e]&&t.push(n[e]=new Promise((function(t,o){for(var r="css/"+({}[e]||e)+"."+{2:"1321565a",3:"959420c6",4:"8a4f669d",5:"c4bc6c64",6:"31d6cfe0",7:"31d6cfe0"}[e]+".css",a=d.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===a))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){c=u[i],l=c.getAttribute("data-href");if(l===r||l===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete n[e],f.parentNode.removeChild(f),o(s)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){n[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,o){r=a[e]=[t,o]}));t.push(r[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,d.nc&&l.setAttribute("nonce",d.nc),l.src=i(e);var u=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(f);var o=a[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",u.name="ChunkLoadError",u.type=r,u.request=n,o[1](u)}a[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},d.m=e,d.c=r,d.d=function(e,t,o){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(d.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)d.d(o,r,function(t){return e[t]}.bind(null,r));return o},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="",d.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var f=l;s.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0047":function(e,t,o){},"2f39":function(e,t,o){"use strict";o.r(t);o("5319");var r=o("c973"),n=o.n(r),a=(o("7d6e"),o("e54f"),o("985d"),o("0047"),o("2b0e")),s=o("1f91"),i=o("42d2"),d=o("b05d"),c=o("436b"),l=o("2a19"),u=o("18d6");a["a"].use(d["a"],{config:{},lang:s["a"],iconSet:i["a"],plugins:{Dialog:c["a"],Notify:l["a"],LocalStorage:u["a"]}});var f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view")],1)},p=[],m=o("ded3"),h=o.n(m),y=o("2f62"),g={methods:h()({},Object(y["b"])("auth",["handleAuthStateChange"])),mounted(){this.handleAuthStateChange()},name:"App"},b=g,S=o("2877"),v=Object(S["a"])(b,f,p,!1,null,null,null),w=v.exports,I=o("1732"),P=o("fc1b");const O={stories:{},search:"",storiesDownloaded:!1,currentStatements:{},currentStory:""},j={deleteStory(e,t){a["a"].delete(e.stories,t)},deleteStatement(e,t){let o=e.currentStatements;a["a"].delete(o,t.id)},addStory(e,t){a["a"].set(e.stories,t.id,t.story)},addStatement(e,t){a["a"].set(e.currentStatements,t.id,t)},updateStory(e,t){Object.assign(e.stories[t.id],t.updates)},updateStatement(e,t){console.log("updateMutation: ",t.storyId,t.updates),Object.assign(e.currentStatements[t.id],t.updates)},setSearch(e,t){e.search=t},setStoriesDownloaded(e,t){e.storiesDownloaded=t},setCurrentStory(e,t){e.currentStory=t}},A={getStatements({dispatch:e},t){e("fbReadStatements",t)},updateStory({dispatch:e,commit:t},o){console.log("update: ",o),e("fbUpdateStory",o),t("updateStory",o)},updateStatement({dispatch:e,commit:t},o){console.log("updateStatementReceived: ",o),e("fbUpdateStatement",o),t("updateStatement",o)},deleteStory({dispatch:e,commit:t},o){e("fbDeleteStory",o),t("deleteStory",o)},deleteStatement({commit:e,dispatch:t},o){t("fbDeleteStatement",o),e("deleteStatement",o)},addStatement({dispatch:e,commit:t},o){let r=Object(I["a"])(),n={id:r,text:o.text,storyId:o.storyId};e("fbAddStatement",n),t("addStatement",n),console.log("payload = ",n)},addStory({dispatch:e,commit:t},o){let r=Object(I["a"])(),n={id:r,story:o};e("fbAddStory",n),t("addStory",n)},setSearch({commit:e},t){e("setSearch",t)},setCurrentStory({commit:e},t){e("setCurrentStory",t)},fbReadData({commit:e}){return n()((function*(){let t=P["b"].currentUser.uid,o=P["c"].ref("stories/"+t),r=P["d"].collection("stories");const n=yield r.get();if(n.empty)return e("setStoriesDownloaded",!0),void console.log("No matching documents.");n.forEach(t=>{e("setStoriesDownloaded",!0);let o=t.data(),r={id:t.id,story:o};e("addStory",r)}),o.on("child_removed",t=>{let o=t.key;e("deleteStory",o)})}))()},fbReadStatements({commit:e},t){return n()((function*(){const o=yield P["d"].collection("stories").doc(t).collection("statements").get();if(o.empty)return e("setStoriesDownloaded",!0),void console.log("No matching documents.");o.forEach(t=>{let o=t.data(),r={storyId:o.storyId,id:t.id,text:o.text};e("addStatement",r)})}))()},fbAddStory({},e){return n()((function*(){yield P["d"].collection("stories").doc(e.id).set(e.story)}))()},fbAddStatement({},e){return n()((function*(){yield P["d"].collection("stories").doc(e.storyId).collection("statements").doc(e.id).set(e)}))()},fbUpdateStory({},e){return n()((function*(){const t=P["d"].collection("stories").doc(e.id);yield t.set(e.updates)}))()},fbUpdateStatement({},e){return n()((function*(){console.log("Receive Payload:",e);const t=P["d"].collection("stories").doc(e.storyId).collection("statements").doc(e.id);console.log("payloadUpdates",e);yield t.update(e.updates)}))()},fbDeleteStory({},e){return n()((function*(){yield P["d"].collection("stories").doc(e).delete()}))()},fbDeleteStatement({},e){return n()((function*(){yield P["d"].collection("stories").doc(e.storyId).collection("statements").doc(e.id).delete()}))()}},E={storiesFiltered:e=>{let t={};return e.search?(Object.keys(e.stories).forEach((function(o){let r=e.stories[o],n=r.title.toLowerCase(),a=e.search.toLowerCase();n.includes(a)&&(t[o]=r)})),t):e.stories},stories:(e,t)=>{let o=t.storiesFiltered;return o},currentStatements:(e,t)=>e.currentStatements};var C={namespaced:!0,state:O,mutations:j,actions:A,getters:E},D=(o("a639"),o("f508"));function L(e){D["a"].hide(),c["a"].create({title:"Error",message:e})}const x={loggedIn:!1},k={setLoggedIn(e,t){e.loggedIn=t}},U={logoutUser(){P["b"].signOut(),u["a"].set("LoggedIn",!1)},registerUser({},e){D["a"].show(),P["b"].createUserWithEmailAndPassword(e.email,e.password).then(e=>{}).catch(e=>{L(e.message)})},loginUser({},e){D["a"].show(),P["b"].signInWithEmailAndPassword(e.email,e.password).then(e=>{}).catch(e=>{L(e.message)})},handleAuthStateChange({commit:e,dispatch:t}){P["b"].onAuthStateChanged(o=>{D["a"].hide(),o?(e("setLoggedIn",!0),u["a"].set("LoggedIn",!0),this.$router.push("/").catch(e=>{}),t("stories/fbReadData",null,{root:!0})):(e("stories/setStoriesDownloaded",!1,{root:!0}),e("setLoggedIn",!1),u["a"].set("LoggedIn",!1),this.$router.replace("/auth").catch(e=>{}))})}},_={};var N={namespaced:!0,state:x,mutations:k,actions:U,getters:_};a["a"].use(y["a"]);var R=function(){const e=new y["a"].Store({modules:{stories:C,auth:N},strict:!1});return e},T=o("8c4f");o("e6cf");const B=[{path:"",component:()=>Promise.all([o.e(0),o.e(5)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"b531"))},{path:"settings",component:()=>Promise.all([o.e(0),o.e(7)]).then(o.bind(null,"311b"))},{path:"auth",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"f724"))},{path:"statements",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"7793"))}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(6)]).then(o.bind(null,"e51e"))}];var M=B;a["a"].use(T["a"]);var $=function(){const e=new T["a"]({scrollBehavior:()=>({x:0,y:0}),routes:M,mode:"hash",base:""});return e},q=function(){return F.apply(this,arguments)};function F(){return F=n()((function*(){const e="function"===typeof R?yield R({Vue:a["a"]}):R,t="function"===typeof $?yield $({Vue:a["a"],store:e}):$;e.$router=t;const o={router:t,store:e,render:e=>e(w),el:"#q-app"};return{app:o,store:e,router:t}})),F.apply(this,arguments)}var J=o("bc3a"),Q=o.n(J);a["a"].prototype.$axios=Q.a;var z=({router:e})=>{e.beforeEach((e,t,o)=>{let r=u["a"].getItem("LoggedIn");r||"/auth"===e.path?o():o("/auth")})};const G="";function K(){return V.apply(this,arguments)}function V(){return V=n()((function*(){const{app:e,store:t,router:o}=yield q();let r=!1;const n=e=>{r=!0;const t=Object(e)===e?o.resolve(e).route.fullPath:e;window.location.href=t},s=window.location.href.replace(window.location.origin,""),i=[void 0,P["default"],z];for(let c=0;!1===r&&c<i.length;c++)if("function"===typeof i[c])try{yield i[c]({app:e,router:o,store:t,Vue:a["a"],ssrContext:null,redirect:n,urlPath:s,publicPath:G})}catch(d){return d&&d.url?void(window.location.href=d.url):void console.error("[Quasar] boot error:",d)}!0!==r&&new a["a"](e)})),V.apply(this,arguments)}K()},fc1b:function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return i})),o.d(t,"d",(function(){return d}));var r=o("59ca"),n=(o("ea7b"),o("e71f"),o("66ce"),{apiKey:"AIzaSyBgQGkyMAWS2JRSkgmKP-nQHwJYczIGo5k",authDomain:"rn-firebase-697de.firebaseapp.com",databaseURL:"https://rn-firebase-697de.firebaseio.com",projectId:"rn-firebase-697de",storageBucket:"rn-firebase-697de.appspot.com",messagingSenderId:"145497306301",appId:"1:145497306301:web:ade46b94f24f017bf9b3d4",measurementId:"G-Q0FY892NE7"});let a=r["initializeApp"](n),s=a.auth(),i=a.database(),d=a.firestore()}});